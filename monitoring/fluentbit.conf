[SERVICE]
    Flush         1
    Log_Level     info
    Daemon        off
    Parsers_File  parsers.conf

[INPUT]
    Name              tail
    Path              /var/log/*.log
    Parser            json
    Tag               virality.*
    Refresh_Interval  5

[INPUT]
    Name              forward
    Listen            0.0.0.0
    Port              24224
    Tag               virality.*

[FILTER]
    Name                modify
    Match               virality.*
    Add                 service virality-engine
    Add                 environment ${ENVIRONMENT:-development}

[OUTPUT]
    Name  opensearch
    Match virality.*
    Host  opensearch
    Port  9200
    Index virality-logs
    Type  _doc
    HTTP_User admin
    HTTP_Passwd admin
    Logstash_Format On
    Logstash_Prefix virality
    Logstash_DateFormat %Y.%m.%d
    Retry_Limit 3
